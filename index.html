<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Á≤æÁæéÁöÑÁÉüËä±Â±èÁΩëÁ´ô - ÁÇπÂáª„ÄÅËá™Âä®Êí≠Êîæ„ÄÅÊñáÂ≠óÁ•ùÁ¶èÔºåËäÇÊó•Â∫ÜÂÖ∏ÂøÖÂ§á">
    <meta name="keywords" content="ÁÉüËä±, firework, ËäÇÊó•, Â∫ÜÁ•ù, Êñ∞Âπ¥, Êò•ËäÇ">
    <meta name="author" content="Your Name">
    <title>üéÜ ÁÉüËä±Â±è - Firework Screen</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            overflow: hidden;
            background: #000;
            font-family: 'Arial', sans-serif;
        }

        #canvas {
            display: block;
            cursor: crosshair;
        }

        .control-panel {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            color: white;
            z-index: 100;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .control-panel h3 {
            margin-bottom: 15px;
            font-size: 1.2rem;
            text-align: center;
        }

        .control-group {
            margin-bottom: 15px;
        }

        .control-group label {
            display: block;
            margin-bottom: 5px;
            font-size: 0.9rem;
        }

        .control-group input[type="range"] {
            width: 100%;
            accent-color: #ff69b4;
        }

        .control-group input[type="text"] {
            width: 100%;
            padding: 8px;
            border: none;
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            font-size: 1rem;
        }

        .control-group input[type="text"]::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        .btn {
            width: 100%;
            padding: 10px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 10px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #ff69b4, #ff1493);
            color: white;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #87ceeb, #4682b4);
            color: white;
        }

        .btn-success {
            background: linear-gradient(135deg, #98fb98, #32cd32);
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 105, 180, 0.4);
        }

        .toggle-panel {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 101;
            color: white;
            font-size: 1.5rem;
            transition: all 0.3s ease;
        }

        .toggle-panel:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.1);
        }

        .text-display {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 4rem;
            font-weight: bold;
            color: white;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.8),
                         0 0 40px rgba(255, 105, 180, 0.6),
                         0 0 60px rgba(255, 105, 180, 0.4);
            z-index: 50;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .text-display.show {
            opacity: 1;
        }

        .hidden {
            display: none;
        }

        @media (max-width: 768px) {
            .control-panel {
                width: 90%;
                right: 5%;
                top: 70px;
            }

            .text-display {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>

    <div class="toggle-panel" id="togglePanel">‚öôÔ∏è</div>

    <div class="control-panel hidden" id="controlPanel">
        <h3>üéÜ ÁÉüËä±ÊéßÂà∂Âè∞</h3>

        <div class="control-group">
            <label>ÁÉüËä±Â§ßÂ∞è: <span id="sizeValue">50</span></label>
            <input type="range" id="fireworkSize" min="20" max="100" value="50">
        </div>

        <div class="control-group">
            <label>Á≤íÂ≠êÊï∞Èáè: <span id="particleValue">100</span></label>
            <input type="range" id="particleCount" min="50" max="200" value="100">
        </div>

        <div class="control-group">
            <label>Ëá™Âä®Êí≠ÊîæÈó¥Èöî(Áßí): <span id="intervalValue">2</span></label>
            <input type="range" id="autoInterval" min="0.5" max="5" value="2" step="0.5">
        </div>

        <div class="control-group">
            <input type="text" id="textInput" placeholder="ËæìÂÖ•Á•ùÁ¶èÊñáÂ≠ó..." maxlength="20">
        </div>

        <button class="btn btn-primary" id="showTextBtn">ÊòæÁ§∫ÊñáÂ≠ó</button>
        <button class="btn btn-secondary" id="autoFireworkBtn">Ëá™Âä®ÁÉüËä±: ÂºÄ</button>
        <button class="btn btn-success" id="fullscreenBtn">ÂÖ®Â±èÊ®°Âºè</button>
        <button class="btn btn-primary" id="soundBtn">Èü≥Êïà: ÂºÄ</button>
    </div>

    <div class="text-display" id="textDisplay"></div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        const state = {
            fireworks: [],
            particles: [],
            fireworkSize: 50,
            particleCount: 100,
            autoInterval: 2000,
            autoFirework: true,
            soundEnabled: true,
            autoTimer: null
        };

        const AudioContext = window.AudioContext || window.webkitAudioContext;
        let audioContext = null;

        function initAudio() {
            if (!audioContext) {
                audioContext = new AudioContext();
            }
        }

        function playFireworkSound() {
            if (!state.soundEnabled || !audioContext) return;

            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();

            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);

            oscillator.frequency.setValueAtTime(150, audioContext.currentTime);
            oscillator.frequency.exponentialRampToValueAtTime(50, audioContext.currentTime + 0.5);

            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);

            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.5);
        }

        function playExplosionSound() {
            if (!state.soundEnabled || !audioContext) return;

            const bufferSize = audioContext.sampleRate * 0.3;
            const buffer = audioContext.createBuffer(1, bufferSize, audioContext.sampleRate);
            const data = buffer.getChannelData(0);

            for (let i = 0; i < bufferSize; i++) {
                data[i] = (Math.random() * 2 - 1) * Math.pow(1 - i / bufferSize, 2);
            }

            const source = audioContext.createBufferSource();
            const gainNode = audioContext.createGain();

            source.buffer = buffer;
            source.connect(gainNode);
            gainNode.connect(audioContext.destination);

            gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);

            source.start();
        }

        const colors = [
            '#FF6B6B', '#4ECDC4', '#45B7D1', '#96CEB4',
            '#FFEAA7', '#DFE6E9', '#FF69B4', '#FFD700',
            '#FF1493', '#00CED1', '#FF7F50', '#9370DB',
            '#3CB371', '#FFB6C1', '#87CEEB', '#DDA0DD'
        ];

        class Firework {
            constructor(x, y, targetX, targetY) {
                this.x = x;
                this.y = y;
                this.targetX = targetX;
                this.targetY = targetY;
                this.speed = 8;
                this.angle = Math.atan2(targetY - y, targetX - x);
                this.velocity = {
                    x: Math.cos(this.angle) * this.speed,
                    y: Math.sin(this.angle) * this.speed
                };
                this.trail = [];
                this.color = colors[Math.floor(Math.random() * colors.length)];
            }

            update() {
                this.trail.push({ x: this.x, y: this.y });
                if (this.trail.length > 10) this.trail.shift();

                this.x += this.velocity.x;
                this.y += this.velocity.y;

                const distance = Math.sqrt(
                    Math.pow(this.targetX - this.x, 2) +
                    Math.pow(this.targetY - this.y, 2)
                );

                if (distance < 10) {
                    return true;
                }
                return false;
            }

            draw() {
                this.trail.forEach((point, index) => {
                    const alpha = index / this.trail.length;
                    ctx.beginPath();
                    ctx.arc(point.x, point.y, 2, 0, Math.PI * 2);
                    ctx.fillStyle = this.color;
                    ctx.globalAlpha = alpha * 0.5;
                    ctx.fill();
                    ctx.globalAlpha = 1;
                });

                ctx.beginPath();
                ctx.arc(this.x, this.y, 3, 0, Math.PI * 2);
                ctx.fillStyle = '#fff';
                ctx.fill();

                ctx.beginPath();
                ctx.arc(this.x, this.y, 6, 0, Math.PI * 2);
                ctx.fillStyle = this.color;
                ctx.globalAlpha = 0.3;
                ctx.fill();
                ctx.globalAlpha = 1;
            }
        }

        class Particle {
            constructor(x, y, color) {
                this.x = x;
                this.y = y;
                this.color = color;
                const angle = Math.random() * Math.PI * 2;
                const speed = Math.random() * 6 + 2;
                this.velocity = {
                    x: Math.cos(angle) * speed,
                    y: Math.sin(angle) * speed
                };
                this.gravity = 0.05;
                this.friction = 0.98;
                this.alpha = 1;
                this.decay = Math.random() * 0.015 + 0.005;
                this.size = Math.random() * 3 + 2;
                this.trail = [];
                this.sparkle = Math.random() > 0.7;
                this.sparkleTimer = 0;
            }

            update() {
                this.trail.push({ x: this.x, y: this.y, alpha: this.alpha });
                if (this.trail.length > 8) this.trail.shift();

                this.velocity.x *= this.friction;
                this.velocity.y *= this.friction;
                this.velocity.y += this.gravity;
                this.x += this.velocity.x;
                this.y += this.velocity.y;
                this.alpha -= this.decay;

                if (this.sparkle) {
                    this.sparkleTimer++;
                }

                return this.alpha <= 0;
            }

            draw() {
                this.trail.forEach((point, index) => {
                    const trailAlpha = (index / this.trail.length) * point.alpha * 0.5;
                    ctx.beginPath();
                    ctx.arc(point.x, point.y, this.size * 0.5, 0, Math.PI * 2);
                    ctx.fillStyle = this.color;
                    ctx.globalAlpha = trailAlpha;
                    ctx.fill();
                });

                ctx.globalAlpha = this.alpha;

                if (this.sparkle && Math.sin(this.sparkleTimer * 0.3) > 0.5) {
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, this.size * 1.5, 0, Math.PI * 2);
                    ctx.fillStyle = '#fff';
                    ctx.fill();
                }

                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fillStyle = this.color;
                ctx.fill();

                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size * 1.5, 0, Math.PI * 2);
                ctx.fillStyle = this.color;
                ctx.globalAlpha = this.alpha * 0.3;
                ctx.fill();

                ctx.globalAlpha = 1;
            }
        }

        function createExplosion(x, y) {
            const color = colors[Math.floor(Math.random() * colors.length)];
            for (let i = 0; i < state.particleCount; i++) {
                state.particles.push(new Particle(x, y, color));
            }
            playExplosionSound();
        }

        function launchFirework(x, y) {
            const startX = Math.random() * canvas.width;
            const startY = canvas.height;
            state.fireworks.push(new Firework(startX, startY, x, y));
            playFireworkSound();
        }

        function autoLaunch() {
            const x = Math.random() * (canvas.width * 0.8) + canvas.width * 0.1;
            const y = Math.random() * (canvas.height * 0.5) + canvas.height * 0.1;
            launchFirework(x, y);
        }

        function animate() {
            ctx.fillStyle = 'rgba(0, 0, 0, 0.15)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            state.fireworks = state.fireworks.filter(firework => {
                const reached = firework.update();
                firework.draw();

                if (reached) {
                    createExplosion(firework.targetX, firework.targetY);
                    return false;
                }
                return true;
            });

            state.particles = state.particles.filter(particle => {
                const dead = particle.update();
                if (!dead) {
                    particle.draw();
                }
                return !dead;
            });

            requestAnimationFrame(animate);
        }

        function startAutoFirework() {
            stopAutoFirework();
            if (state.autoFirework) {
                state.autoTimer = setInterval(autoLaunch, state.autoInterval);
            }
        }

        function stopAutoFirework() {
            if (state.autoTimer) {
                clearInterval(state.autoTimer);
                state.autoTimer = null;
            }
        }

        canvas.addEventListener('click', (e) => {
            initAudio();
            launchFirework(e.clientX, e.clientY);
        });

        canvas.addEventListener('mousemove', (e) => {
            if (Math.random() > 0.95) {
                initAudio();
                state.particles.push(new Particle(e.clientX, e.clientY,
                    colors[Math.floor(Math.random() * colors.length)]));
            }
        });

        canvas.addEventListener('touchstart', (e) => {
            e.preventDefault();
            initAudio();
            const touch = e.touches[0];
            launchFirework(touch.clientX, touch.clientY);
        });

        const togglePanel = document.getElementById('togglePanel');
        const controlPanel = document.getElementById('controlPanel');

        togglePanel.addEventListener('click', () => {
            controlPanel.classList.toggle('hidden');
        });

        document.getElementById('fireworkSize').addEventListener('input', (e) => {
            state.fireworkSize = parseInt(e.target.value);
            document.getElementById('sizeValue').textContent = e.target.value;
        });

        document.getElementById('particleCount').addEventListener('input', (e) => {
            state.particleCount = parseInt(e.target.value);
            document.getElementById('particleValue').textContent = e.target.value;
        });

        document.getElementById('autoInterval').addEventListener('input', (e) => {
            state.autoInterval = parseFloat(e.target.value) * 1000;
            document.getElementById('intervalValue').textContent = e.target.value;
            startAutoFirework();
        });

        document.getElementById('showTextBtn').addEventListener('click', () => {
            const text = document.getElementById('textInput').value.trim();
            if (text) {
                const textDisplay = document.getElementById('textDisplay');
                textDisplay.textContent = text;
                textDisplay.classList.add('show');

                for (let i = 0; i < 5; i++) {
                    setTimeout(() => {
                        const x = canvas.width / 2 + (Math.random() - 0.5) * 400;
                        const y = canvas.height / 2 + (Math.random() - 0.5) * 200;
                        launchFirework(x, y);
                    }, i * 300);
                }

                setTimeout(() => {
                    textDisplay.classList.remove('show');
                }, 3000);
            }
        });

        document.getElementById('autoFireworkBtn').addEventListener('click', (e) => {
            state.autoFirework = !state.autoFirework;
            e.target.textContent = `Ëá™Âä®ÁÉüËä±: ${state.autoFirework ? 'ÂºÄ' : 'ÂÖ≥'}`;
            startAutoFirework();
        });

        document.getElementById('fullscreenBtn').addEventListener('click', () => {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen();
            } else {
                document.exitFullscreen();
            }
        });

        document.getElementById('soundBtn').addEventListener('click', (e) => {
            initAudio();
            state.soundEnabled = !state.soundEnabled;
            e.target.textContent = `Èü≥Êïà: ${state.soundEnabled ? 'ÂºÄ' : 'ÂÖ≥'}`;
        });

        animate();
        startAutoFirework();

        setTimeout(() => {
            for (let i = 0; i < 3; i++) {
                setTimeout(() => {
                    autoLaunch();
                }, i * 500);
            }
        }, 500);
    </script>
</body>
</html>